:root{
  --bg:#0b0c0e;
  --text:#f5f6f8;
  --muted:#a8a8b3;
  --line:rgba(255,255,255,.16);
  --glass:rgba(255,255,255,.06);
  --accent:#37d67a;
  --danger:#ff5b5b;
  --r:20px;
  --blur:16px;
  
  /* Safe area для iPhone с вырезами */
  --safe-top: env(safe-area-inset-top, 0);
  --safe-right: env(safe-area-inset-right, 0);
  --safe-bottom: env(safe-area-inset-bottom, 0);
  --safe-left: env(safe-area-inset-left, 0);
}

*{
  box-sizing:border-box;
  /* Убираем подсветку при тапе на iOS */
  -webkit-tap-highlight-color:rgba(0,0,0,0);
  -webkit-touch-callout:none;
}

html{
  /* Плавный скролл для всей страницы */
  scroll-behavior:smooth;
  /* Запрещаем overscroll bounce на iOS */
  overscroll-behavior:none;
  /* Оптимизация текста для мобильных */
  -webkit-text-size-adjust:100%;
  -moz-text-size-adjust:100%;
  text-size-adjust:100%;
}

html,body{height:100%}

body{
  margin:0; color:var(--text);
  background:#070708;
  font-family:'Inter',system-ui,Segoe UI,Roboto,Arial,Helvetica,sans-serif;
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
  /* Оптимизация для touch-устройств */
  touch-action:pan-y pan-x;
  /* Убираем выделение текста при долгом нажатии */
  -webkit-user-select:none;
  -moz-user-select:none;
  user-select:none;
  /* Добавляем overflow для body */
  overflow-x:hidden;
  position:relative;
}

/* Мерцающие акценты на фоне */
body::before{
  content:'';
  position:fixed;
  inset:0;
  background-image:
    radial-gradient(2px 2px at 20% 30%, rgba(16,185,129,.4), transparent),
    radial-gradient(2px 2px at 60% 70%, rgba(59,130,246,.3), transparent),
    radial-gradient(1px 1px at 50% 50%, rgba(139,92,246,.3), transparent),
    radial-gradient(1px 1px at 80% 10%, rgba(34,197,94,.4), transparent),
    radial-gradient(2px 2px at 90% 60%, rgba(16,185,129,.3), transparent),
    radial-gradient(1px 1px at 33% 80%, rgba(79,70,229,.3), transparent),
    radial-gradient(1px 1px at 15% 90%, rgba(34,197,94,.3), transparent),
    radial-gradient(2px 2px at 45% 15%, rgba(59,130,246,.3), transparent);
  background-size:200% 200%;
  background-position:0% 0%;
  animation:sparkle 8s ease-in-out infinite;
  pointer-events:none;
  z-index:-1;
  opacity:.5;
}

/* Анимация мерцания */
@keyframes sparkle{
  0%, 100%{
    opacity:.3;
    background-position:0% 0%;
  }
  25%{
    opacity:.6;
    background-position:50% 50%;
  }
  50%{
    opacity:.4;
    background-position:100% 100%;
  }
  75%{
    opacity:.5;
    background-position:50% 0%;
  }
}

/* Анимированный градиентный фон - 3 слоя для глубины */
.bg:before{
  content:""; 
  position:fixed; 
  inset:0;
  background:
    radial-gradient(circle at 20% 30%, rgba(16,185,129,.25) 0%, transparent 50%),
    radial-gradient(circle at 80% 20%, rgba(59,130,246,.2) 0%, transparent 50%),
    radial-gradient(circle at 40% 70%, rgba(139,92,246,.15) 0%, transparent 50%);
  filter:blur(80px);
  z-index:-1;
  animation:bgPulse 15s ease-in-out infinite;
}

.bg:after{
  content:"";
  position:fixed;
  inset:0;
  background:
    radial-gradient(ellipse at 10% 50%, rgba(16,185,129,.15) 0%, transparent 60%),
    radial-gradient(ellipse at 90% 80%, rgba(79,70,229,.12) 0%, transparent 60%),
    radial-gradient(ellipse at 50% 10%, rgba(34,197,94,.1) 0%, transparent 60%);
  filter:blur(100px);
  z-index:-1;
  animation:bgFloat 20s ease-in-out infinite reverse;
}

/* Анимация пульсации фона */
@keyframes bgPulse{
  0%, 100%{ 
    opacity:.8;
    transform:scale(1) rotate(0deg);
  }
  25%{
    opacity:.9;
    transform:scale(1.05) rotate(1deg);
  }
  50%{
    opacity:1;
    transform:scale(1.1) rotate(0deg);
  }
  75%{
    opacity:.9;
    transform:scale(1.05) rotate(-1deg);
  }
}

/* Анимация плавания фона */
@keyframes bgFloat{
  0%, 100%{
    opacity:.7;
    transform:translateY(0) scale(1);
  }
  33%{
    opacity:.85;
    transform:translateY(-20px) scale(1.08);
  }
  66%{
    opacity:.75;
    transform:translateY(10px) scale(1.05);
  }
}

/* затемнение */
.scrim{
  position:fixed; inset:0; background:rgba(0,0,0,.45); opacity:0; pointer-events:none;
  transition:opacity .28s ease; z-index:39;
}
.scrim.show{ opacity:1; pointer-events:auto }

/* экран - улучшенный градиентный фон */
.phone{
  width:100%; max-width:430px; margin:0 auto; min-height:100dvh;
  padding-bottom: env(safe-area-inset-bottom, 0);
  background: 
    linear-gradient(135deg, 
      rgba(16,185,129,.03) 0%, 
      transparent 30%,
      transparent 70%,
      rgba(79,70,229,.03) 100%
    ),
    radial-gradient(ellipse 900px 600px at 50% 0%, 
      rgba(15,23,42,.98) 0%, 
      rgba(11,12,14,.99) 50%, 
      rgba(6,6,7,1) 100%
    );
  position:relative;
}

/* стекло - улучшенный эффект */
.glass{
  background:linear-gradient(
    135deg,
    rgba(255,255,255,.08) 0%,
    rgba(255,255,255,.04) 50%,
    rgba(255,255,255,.06) 100%
  );
  border:1px solid var(--line);
  backdrop-filter: blur(var(--blur)) saturate(140%);
  border-radius:var(--r);
  box-shadow: 
    inset 0 1px 0 0 rgba(255,255,255,.08),
    inset 0 0 20px rgba(16,185,129,.03),
    0 10px 30px rgba(0,0,0,.5),
    0 0 40px rgba(16,185,129,.05);
  position:relative;
  overflow:hidden;
}

/* Мерцающий блик на glass элементах */
.glass::before{
  content:'';
  position:absolute;
  top:-50%;
  left:-50%;
  width:200%;
  height:200%;
  background:linear-gradient(
    45deg,
    transparent 30%,
    rgba(255,255,255,.03) 50%,
    transparent 70%
  );
  animation:glassShine 8s linear infinite;
  pointer-events:none;
}

@keyframes glassShine{
  0%{
    transform:translateX(-100%) translateY(-100%) rotate(45deg);
  }
  100%{
    transform:translateX(100%) translateY(100%) rotate(45deg);
  }
}

/* нажатие - оптимизировано для touch */
.tap{ 
  cursor:pointer; 
  transition:transform .08s ease;
  /* Улучшаем отклик на касание */
  -webkit-user-select:none;
  user-select:none;
  /* Оптимизация производительности */
  will-change:transform;
}
.tap:active{ 
  transform:scale(.96);
}
/* Для touch-устройств используем :active вместо :hover */
@media (hover: none) and (pointer: coarse) {
  .tap:active{
    transform:scale(.94);
  }
}

/* топ-бар */
.topbar{
  position:relative;
  display:flex; align-items:center; justify-content:space-between;
  padding:10px 12px 8px;
  background:linear-gradient(to bottom, rgba(11,12,14,.98), rgba(11,12,14,.85));
  z-index:10;
}
.icon{
  border:1px solid var(--line); background:rgba(255,255,255,.08);
  border-radius:14px; padding:10px 12px; color:var(--text); font-size:18px;
}
.brand{ text-align:center; max-width:62%; margin:0 auto; display:grid; justify-items:center; gap:6px }
.brand-lines{ display:grid; gap:2px }
.brand-main{ font-weight:900; font-size:16px; letter-spacing:.2px }
.brand-sub{ color:var(--muted); font-size:11px; line-height:1.3 }
.logo-img{
  width:72px; height:72px; object-fit:contain; 
  filter:drop-shadow(0 4px 12px rgba(55,214,122,.45));
  animation: logoEntrance 1.5s cubic-bezier(.2,.9,.2,1) both;
}
/* Крутая анимация загрузки логотипа на 1.5 секунды */
@keyframes logoEntrance{
  0%{ 
    transform:translateY(-20px) scale(.3) rotate(-180deg); 
    opacity:0;
    filter:drop-shadow(0 0 0 rgba(55,214,122,0)) blur(8px);
  }
  40%{
    transform:translateY(-5px) scale(.8) rotate(10deg);
    opacity:.7;
    filter:drop-shadow(0 6px 16px rgba(55,214,122,.3)) blur(2px);
  }
  70%{
    transform:translateY(0) scale(1.15) rotate(-5deg);
    opacity:1;
    filter:drop-shadow(0 8px 20px rgba(55,214,122,.6)) blur(0);
  }
  85%{
    transform:translateY(2px) scale(.95) rotate(2deg);
    filter:drop-shadow(0 6px 16px rgba(55,214,122,.5));
  }
  100%{ 
    transform:translateY(0) scale(1) rotate(0deg);
    opacity:1;
    filter:drop-shadow(0 4px 12px rgba(55,214,122,.45));
  }
}

/* Экран загрузки */
.loader{
  position:fixed; inset:0; z-index:100;
  background:radial-gradient(900px 600px at 10% -10%, #18181c, #0b0c0e 55%, #060607 100%);
  display:grid; place-items:center;
  opacity:1; transition:opacity .5s cubic-bezier(.4,0,.2,1);
  pointer-events:auto;
}
.loader.hide{ opacity:0; pointer-events:none; }
.loader-content{
  display:flex; flex-direction:column; align-items:center; gap:20px;
  transform:translateY(-20px);
}
.loader-logo{
  width:80px; height:80px; object-fit:contain;
  filter:drop-shadow(0 8px 24px rgba(55,214,122,.5));
  animation: loaderPulse 1.2s ease-in-out infinite;
}
@keyframes loaderPulse{
  0%, 100%{ transform:scale(1) rotate(0deg); opacity:.9 }
  25%{ transform:scale(1.03) rotate(-2deg); opacity:.95 }
  50%{ transform:scale(1.05) rotate(0deg); opacity:1 }
  75%{ transform:scale(1.03) rotate(2deg); opacity:.95 }
}
.loader-text{
  color:var(--text); font-weight:700; font-size:18px; letter-spacing:.3px;
  opacity:0; animation: loaderFadeIn .8s ease .4s both;
  text-shadow:0 2px 8px rgba(0,0,0,.3);
}
@keyframes loaderFadeIn{
  from{ opacity:0; transform:translateY(10px) }
  to{ opacity:.9; transform:translateY(0) }
}

.sub{ color:var(--muted); font-size:11px; line-height:1.25; margin-top:2px }
.badge{ background:var(--accent); color:#062012; border-radius:10px; font-weight:900; padding:2px 6px; font-size:12px; margin-left:6px }

/* поиск */
.search{ margin:12px; padding:12px; display:flex; align-items:center; gap:10px; }
.search input{ flex:1; background:transparent; border:0; outline:0; color:var(--text); font-size:14px }
.loupe{opacity:.85}
.filter{ background:rgba(255,255,255,.06); border:1px solid var(--line); border-radius:12px }

/* категории - ЗАФИКСИРОВАННАЯ ПАНЕЛЬ */
.cats{
  position:sticky; 
  /* Фиксируем панель вверху экрана */
  top:0;
  z-index:25;
  display:flex; gap:10px; overflow-x:auto; overflow-y:hidden;
  padding:12px 12px;
  padding-top:calc(12px + var(--safe-top));
  padding-left:calc(12px + var(--safe-left));
  padding-right:calc(12px + var(--safe-right));
  scroll-snap-type:x proximity;
  /* Оптимизация скролла для iOS */
  -webkit-overflow-scrolling:touch;
  overscroll-behavior-x:contain;
  scrollbar-width:thin;
  scrollbar-color:rgba(255,255,255,.2) transparent;
  /* Непрозрачный фон чтобы панель была четко видна */
  background:linear-gradient(to bottom, rgba(11,12,14,1) 0%, rgba(11,12,14,.98) 100%);
  backdrop-filter:blur(16px) saturate(180%);
  border-bottom:1px solid var(--line);
  box-shadow:0 6px 24px rgba(0,0,0,.6);
  /* Оптимизация производительности */
  will-change:scroll-position;
  /* Touch-friendly */
  touch-action:pan-x;
}
.cats::-webkit-scrollbar{ height:4px }
.cats::-webkit-scrollbar-track{ background:transparent }
.cats::-webkit-scrollbar-thumb{ background:rgba(255,255,255,.2); border-radius:2px }
.cat{
  flex:0 0 auto; scroll-snap-align:center;
  display:flex; flex-direction:column; align-items:center; gap:6px;
  padding:10px 14px; min-width:80px;
  /* Увеличиваем минимальную область тапа для удобства */
  min-height:44px;
  background:rgba(255,255,255,.05); border:1px solid var(--line); border-radius:18px;
  color:var(--text); font-weight:700;
  white-space:nowrap;
  /* Оптимизация для touch */
  touch-action:manipulation;
  -webkit-user-select:none;
  user-select:none;
}
.cat .icon{ 
  font-size:24px; 
  line-height:1; 
  margin-bottom:2px; 
  filter:drop-shadow(0 2px 4px rgba(0,0,0,.3));
  transition:transform .2s ease;
}
.cat span{ font-size:11px; color:#e9e9ef; text-align:center }

/* Активная категория с красивым свечением */
.cat.active{ 
  outline:2px solid rgba(55,214,122,.6); 
  background:linear-gradient(
    135deg,
    rgba(55,214,122,.18) 0%,
    rgba(55,214,122,.12) 50%,
    rgba(55,214,122,.15) 100%
  );
  box-shadow:
    inset 0 0 20px rgba(55,214,122,.1),
    0 4px 20px rgba(55,214,122,.25),
    0 0 30px rgba(55,214,122,.15);
  animation:categoryPulse 2s ease-in-out infinite;
}

.cat.active .icon{
  filter:drop-shadow(0 2px 8px rgba(55,214,122,.6));
  transform:scale(1.08);
}

/* Пульсация активной категории */
@keyframes categoryPulse{
  0%, 100%{
    box-shadow:
      inset 0 0 20px rgba(55,214,122,.1),
      0 4px 20px rgba(55,214,122,.25),
      0 0 30px rgba(55,214,122,.15);
  }
  50%{
    box-shadow:
      inset 0 0 25px rgba(55,214,122,.15),
      0 6px 25px rgba(55,214,122,.35),
      0 0 40px rgba(55,214,122,.25);
  }
}

/* сетка карточек 2 колонки */
/* >>> ФИКС МАСШТАБИРОВАНИЯ КАРТИНОК В КАРТОЧКАХ <<< */
/* карточка */
.grid{ display:grid; grid-template-columns:repeat(2,1fr); gap:12px; padding:8px 12px 18px }

/* секция категории в сетке */
.category-section{
  grid-column:1/-1; display:contents;
}
.category-title{
  grid-column:1/-1; font-weight:900; font-size:18px; 
  padding:20px 8px 12px;
  color:var(--text); letter-spacing:.3px;
  position:relative;
  margin-top:8px;
}
.category-title:first-of-type{
  margin-top:0;
}
.category-title::before{
  content:''; position:absolute; left:0; right:0; top:8px;
  height:1px; background:linear-gradient(90deg, transparent, var(--line) 10%, var(--line) 90%, transparent);
}
.category-title::after{
  content:''; position:absolute; left:8px; bottom:4px;
  width:40px; height:3px; border-radius:2px;
  background:linear-gradient(90deg, var(--accent), transparent);
}
.card{ 
  position:relative; 
  padding:12px; 
  display:flex; 
  flex-direction:column; 
  gap:8px;
  /* Добавляем hover эффект */
  transition:transform .2s ease, box-shadow .2s ease;
}

.card:hover{
  transform:translateY(-2px);
  box-shadow: 
    inset 0 0 0 1px rgba(255,255,255,.08), 
    0 12px 40px rgba(0,0,0,.55),
    0 0 30px rgba(16,185,129,.1);
}

.card:active{
  transform:translateY(0);
}

/* контейнер для картинки */
.card .img{
  width:100%;
  height:120px;            /* или: aspect-ratio: 4 / 3; */
  border-radius:16px;
  overflow:hidden;
  background:#151518;
  box-shadow:inset 0 0 0 1px rgba(255,255,255,.08);
}

/* само изображение */
.card .img > img{
  width:100%;
  height:100%;
  display:block;           /* убирает baseline-просвет */
  object-fit:cover;        /* заполнение без искажений */
  object-position:center;
}
.card .title{ font-weight:800; font-size:13px; line-height:1.15 }
.card .sub{ font-size:11px; color:var(--muted); min-height:32px; }

/* Ценник - перемещаем влево, чтобы не перекрывался кнопкой */
.price-badge{ 
  position:absolute; 
  left:10px; 
  bottom:10px; 
  background:linear-gradient(180deg,#ff6b6b,#d44848); 
  border-radius:10px; 
  padding:5px 10px; 
  font-weight:900; 
  font-size:13px; 
  box-shadow:0 6px 12px rgba(212,72,72,.4);
  z-index:2;
  /* Делаем ценник более заметным */
  letter-spacing:.3px;
}

/* Кнопка добавления - справа внизу */
.add{ 
  position:absolute;
  right:10px;
  bottom:10px;
  background:linear-gradient(135deg, #37d67a 0%, #22c55e 50%, #1c9a58 100%); 
  color:#062012; 
  border:0; 
  border-radius:12px; 
  padding:0; 
  font-weight:900;
  font-size:20px;
  /* Минимальная область тапа 44x44px для iOS */
  width:44px; 
  height:44px;
  display:flex; 
  align-items:center; 
  justify-content:center;
  /* Оптимизация для touch */
  touch-action:manipulation;
  z-index:3;
  /* Красивое свечение */
  box-shadow:
    0 4px 12px rgba(55,214,122,.35),
    0 0 20px rgba(55,214,122,.2),
    inset 0 1px 0 rgba(255,255,255,.3);
  transition:transform .15s ease, box-shadow .15s ease;
}

.add:hover{
  transform:scale(1.05);
  box-shadow:
    0 6px 16px rgba(55,214,122,.45),
    0 0 30px rgba(55,214,122,.3),
    inset 0 1px 0 rgba(255,255,255,.4);
}

.add:active{
  transform:scale(.95);
}

/* шторки */
.drawer,.cart{
  position:fixed; top:0; bottom:0; width:100%; max-width:420px; background:rgba(10,11,12,.75);
  backdrop-filter:blur(18px); z-index:40;
  transform:translateX(-104%); transition:transform .34s cubic-bezier(.22,.72,.05,1);
  border-right:1px solid var(--line); padding:12px;
}
.cart{ right:0; left:auto; border-left:1px solid var(--line); border-right:0; transform:translateX(104%) }
.drawer.open{ transform:none } .cart.open{ transform:none }
.drawer-head{ display:flex; align-items:center; justify-content:space-between; margin:4px 0 10px }
.drawer-item{ width:100%; text-align:left; padding:12px; border:1px solid var(--line); background:rgba(255,255,255,.06); border-radius:16px; color:var(--text); margin-bottom:8px; font-weight:700 }

/* Секции в боковом меню */
.drawer-section{ margin-bottom:10px }
.drawer-section-header{
  width:100%; text-align:left; padding:12px; border:1px solid var(--line);
  background:rgba(255,255,255,.06); border-radius:16px; color:var(--text);
  font-weight:700; display:flex; align-items:center; justify-content:space-between;
}
.drawer-section-header .arrow{
  transition:transform .28s ease; font-size:12px; opacity:.7;
}
.drawer-section-header.collapsed .arrow{ transform:rotate(-90deg) }
.drawer-section-content{
  max-height:500px; overflow:hidden; opacity:1;
  transition:max-height .32s ease, opacity .28s ease, margin .28s ease;
  margin-top:8px;
}
.drawer-section-content.collapsed{
  max-height:0; opacity:0; margin-top:0;
}

.profile{ padding:12px; margin-bottom:0 }
.profile label{ display:block; font-size:12px; color:var(--muted); margin:6px 0 }
.profile input{ width:100%; background:rgba(255,255,255,.06); border:1px solid var(--line); border-radius:12px; color:var(--text); padding:10px; box-sizing:border-box }
.btn{ border:0; padding:12px 14px; border-radius:14px; font-weight:900; }
.btn.primary{ background:linear-gradient(180deg,#37d67a,#1c9a58); color:#062012 }
.btn.ghost{ background:rgba(255,255,255,.08); border:1px solid var(--line); color:var(--text) }
.btn.wide{ width:100% }
.input{ width:100%; background:rgba(255,255,255,.06); border:1px solid var(--line); border-radius:12px; color:var(--text); padding:10px }
.muted{ color:var(--muted) } .small{ font-size:12px } .tiny{ font-size:11px }

/* корзина */
.cart-list{ display:grid; gap:8px; max-height:55vh; overflow:auto; padding-right:2px }
.row{ display:flex; align-items:center; justify-content:space-between; gap:10px }
.cart-row{ display:grid; grid-template-columns:1fr auto; gap:10px; padding:10px; border:1px solid var(--line); border-radius:16px; background:rgba(255,255,255,.05) }
.qty-sm{ display:flex; gap:8px; align-items:center }
.qty-sm button{ width:28px; height:28px; border-radius:10px; border:1px solid var(--line); background:rgba(255,255,255,.08); color:var(--text); font-weight:900 }
.cart-foot{ position:sticky; bottom:0; padding:12px; display:grid; gap:8px }

/* sheet */
.sheet{ position:fixed; inset:0; z-index:50; pointer-events:none; opacity:0; transition:opacity .25s ease }
.sheet.show{ pointer-events:auto; opacity:1 }
.sheet-img{ position:relative; display:grid; place-items:center; padding-top:20px }
.sheet-img img{ width:min(92%, 360px); filter:drop-shadow(0 40px 40px rgba(0,0,0,.55)) }
.calories{ position:absolute; right:14px; top:14px; padding:6px 10px; font-size:12px }
.sheet-body{ margin:10px 12px 18px; padding:14px; display:grid; gap:10px; animation: bodyRise .28s ease both }
@keyframes bodyRise{ from{ transform:translateY(12px); opacity:.3 } to{ transform:none; opacity:1 } }
.sheet-back{ position:fixed; left:10px; top:10px }
.qty{ display:flex; gap:10px; align-items:center; justify-content:center }
.qty .icon{ width:36px; height:36px; display:grid; place-items:center; border:1px solid var(--line); border-radius:12px; background:rgba(255,255,255,.08); font-size:18px }
.sheet-actions{ display:flex; align-items:center; justify-content:space-between }
.price{ font-weight:900; font-size:20px }

.homebar{ height:26px }

/* тост */
.toast{
  position:fixed; left:50%; transform:translateX(-50%); bottom:18px; z-index:60;
  background:rgba(24,24,28,.9); border:1px solid var(--line); color:var(--text);
  padding:10px 14px; border-radius:14px; opacity:0; transition:.25s;
}
.toast.show{ opacity:1 }

/* Индикатор синхронизации */
.sync-badge{
  position:fixed; 
  top:calc(60px + var(--safe-top)); 
  right:12px; 
  z-index:30;
  padding:8px 12px; 
  border-radius:12px; 
  font-size:11px; 
  font-weight:700;
  backdrop-filter:blur(12px);
  box-shadow:0 4px 12px rgba(0,0,0,.3);
  animation:slideInRight .3s ease;
  transition:all .25s ease;
}

@keyframes slideInRight{
  from{ transform:translateX(120%); opacity:0; }
  to{ transform:translateX(0); opacity:1; }
}

.sync-badge.sync-loading{
  background:rgba(59,130,246,.2);
  border:1px solid rgba(59,130,246,.4);
  color:#60a5fa;
}

.sync-badge.sync-saving{
  background:rgba(139,92,246,.2);
  border:1px solid rgba(139,92,246,.4);
  color:#a78bfa;
}

.sync-badge.sync-success{
  background:rgba(34,197,94,.2);
  border:1px solid rgba(34,197,94,.4);
  color:#4ade80;
}

.sync-badge.sync-warning{
  background:rgba(251,191,36,.2);
  border:1px solid rgba(251,191,36,.4);
  color:#fbbf24;
}

.sync-badge.sync-error{
  background:rgba(239,68,68,.2);
  border:1px solid rgba(239,68,68,.4);
  color:#f87171;
}

/* Оптимизация для маленьких экранов */
@media (max-width:360px){
  .card .img{ height:108px }
  .brand{ max-width:54% }
  .logo-img{ width:56px; height:56px; }
  .cat{ min-width:70px; padding:8px 12px; }
  .cat .icon{ font-size:20px }
  .cat span{ font-size:10px }
  .category-title{ font-size:16px; padding:16px 6px 10px; }
}

/* Оптимизация для средних экранов */
@media (min-width:361px) and (max-width:414px){
  .card .img{ height:120px }
  .brand{ max-width:60% }
}

/* Оптимизация для больших телефонов */
@media (min-width:415px){
  .card .img{ height:140px }
  .grid{ gap:14px; padding:10px 14px 20px; }
}

/* Landscape ориентация на мобильных */
@media (max-height:500px) and (orientation:landscape){
  .cats{ padding:8px 12px; }
  .cat{ min-width:70px; padding:8px 10px; }
  .category-title{ font-size:16px; padding:12px 8px 8px; }
  .topbar{ padding:6px 10px; }
}

/* Оптимизация для устройств с высоким DPI */
@media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi){
  .logo-img{ image-rendering:-webkit-optimize-contrast; }
  .card .img img{ image-rendering:-webkit-optimize-contrast; }
}

/* Поддержка темной темы системы */
@media (prefers-color-scheme: dark){
  :root{
    --bg:#0b0c0e;
    --text:#f5f6f8;
  }
}

/* Уменьшение анимаций для экономии батареи */
@media (prefers-reduced-motion: reduce){
  *{
    animation-duration:0.01ms !important;
    animation-iteration-count:1 !important;
    transition-duration:0.01ms !important;
    scroll-behavior:auto !important;
  }
  /* Отключаем фоновые анимации для экономии */
  .bg:before, .bg:after, body::before, .glass::before{
    animation:none !important;
  }
}
